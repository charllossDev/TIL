# 1.DBMS

데이터베이스 관리 시스템(영어: database management system, DBMS)은 다수의 사용자들이 데이터베이스 내의 데이터를 접근할 수 있도록 해주는 소프트웨어 도구의 집합이다.

* 데이터를 CRUD(생성, 수정, 삭제, 검색)하는 시스템
* 검색에 최적화(인덱스)
* **업데이트가 많은 경우 대안이 필요**

## Index

인덱스의 종류

* 이진검색(Binary Search)
    + 최대 log2(N)번 내에 검색가능
* B-Tree 계열
    + 최대 log3(n)번 내에 검색가능
    + 상용 DBMS에서 가장 많이 사용

> 데이터 추가/수정/삭제할 때마다 정렬/인덱스 업데이트가 일어남


### Binary Search

이진 검색 알고리즘(binary search algorithm)은 오름차순으로 정렬된 리스트에서 특정한 값의 위치를 찾는 알고리즘이다. 처음 중간의 값을 임의의 값으로 선택하여, 그 값과 찾고자 하는 값의 크고 작음을 비교하는 방식을 채택하고 있다. 처음 선택한 중앙값이 만약 찾는 값보다 크면 그 값은 새로운 최댓값이 되며, 작으면 그 값은 새로운 최솟값이 된다. 검색 원리상 정렬된 리스트에만 사용할 수 있다는 단점이 있지만, 검색이 반복될 때마다 목표값을 찾을 확률은 두 배가 되므로 속도가 빠르다는 장점이 있다.

이진탐색으로 전체에서 중간값을 탐색
그 결과로 나눠진 2개의 중간값을 탐색 -> 계속반복
+

* **데이터가 추가/삭제/변경 될 때마다 한가운데, 왼쪽 가운데/ 오른쪽 가운데값 등을 미리 계산해 놓음**

> 인덱스(Index) 라고 통칭 함

### B-Tree

전산학에서 B-트리(B-tree)는 데이터베이스와 파일 시스템에서 널리 사용되는 트리 자료구조의 일종으로, 이진 트리를 확장해 하나의 노드가 가질 수 있는 자식 노드의 최대 숫자가 2보다 큰 트리 구조이다.

방대한 양의 저장된 자료를 검색해야 하는 경우 검색어와 자료를 일일이 비교하는 방식은 비효율적이다. B-트리는 자료를 정렬된 상태로 보관하고, 삽입 및 삭제를 대수 시간으로 할 수 있다. 대부분의 이진 트리는 항목이 삽입될 때 하향식으로 구성되는 데 반해, B-트리는 일반적으로 상향식으로 구성된다.

이진 탐색과 유사하지만, 한 번에 비교를 2번(a , b : a < b)하여, 즉 경우의 수는 3가지

* 작은 값 보다 작은경우
* 큰 값과 작은 값 사이인 경우
* 큰 값보다 큰 경우

그렇기 때문에 이진탐색보다 속도가 빠르다 (이진탐색 < B-트리 탐색)

* **데이터가 추가/삭제/변경 될 때마다 a, b 값을 업데이트**

## DBMS 종류

* 계층형 데이터베이스
* 네트워크 데이터베이스
* **관계형 데이터베이스**(RDBMS)
* 객체지향 데이터베이스
* 객체관계형 데이터베이스(ORDBMS)
* NoSQL(Not Only SQL)



# 2. RDBMS

관계형 데이터베이스 관리 시스템(Relational Database Management System, RDBMS)은 IBM 산호세 연구소의 에드거 F. 커드가 도입한 관계형 모델을 기반으로 하는 데이터베이스 관리 시스템이다. 현재 사용되는 대부분의 데이터베이스는 관계형 데이터베이스 모델을 기반으로 한다.

1980년대 이래로 RDBMS는 재무기록, 제조 및 물류 정보, 인사 데이터 등의 정보를 저장하는데 가장 많이 사용되는 스토리지다. 과거 계층형 데이터베이스나 네트워크 데이터베이스에 비해 사용 및 이해가 쉬워 관계형 데이터베이스가 이들을 많이 대체했다. 하지만 요즘은 XML 데이터베이스나 객체지향적 모델과 관계형 모델의 불일치 문제를 해결하기 위해 대두된 객체 지향 데이터베이스와 같은 새로운 경쟁자들이 대두되고 있다.

* 테이블 기반의 DBMS
    + [x] 테이블 - 컬럼 형태의 데이터 저장 방식
    + [x] 테이블과 테이블 간의 연관관계(주로 외래키형태)를 이용해 필요한 정보를 구하는 방식
    + 하나의 테이블은 여러 개의 컬럼으로 구성
    + 테이블끼리의 중복정보는 최소화 시킴
        - 동일한 데이터가 여러군데 중복되어 존재하면 데이터의 수정시 문제 발생 확률 높아짐
        - 정규화(Nomalize) - > 정규형
        - 여러 테이블을 합쳐 큰 테이블을 생성(JOIN)
* 모델링은 E-R(Entity Relationship) 모델을 사용
* 테이블을 엔티티(기본)와 릴레이션(유도)를 사용


## 기본 용어

스키마(Schema)

* 데이터베이스 스키마(database schema)는 데이터베이스에서 자료의 구조, 자료의 표현 방법, 자료 간의 관계를 형식 언어로 정의한 구조이다. 데이터베이스 관리 시스템(DBMS)이 주어진 설정에 따라 데이터베이스 스키마를 생성하며, 데이터베이스 사용자가 자료를 저장, 조회, 삭제, 변경할 때 DBMS는 자신이 생성한 데이터베이스 스키마를 참조하여 명령을 수행한다.

* 스키마는 3층 구조로 되어있다.

    + 외부 스키마(External Schema) : 프로그래머나 사용자의 입장에서 데이터베이스의 모습으로 조직의 일부분을 정의한 것
    + 개념 스키마(Conceptual Schema) : 모든 응용 시스템과 사용자들이 필요로하는 데이터를 통합한 조직 전체의 데이터베이스 구조를 논리적으로 정의한 것
    + 내부 스키마(Internal Schema) : 전체 데이터베이스의 물리적 저장 형태를 기술하는 것

SQL쿼리(SQL Query)
* 관계형 DBMS를 사용하는 전용 질의언어
* 대소문자를 가지리 않음(Interpreter Langague)

기본키(Primary Key) - PK
* 기본 키(primary key)는 주 키 또는 프라이머리 키라고 하며, 관계형 데이터베이스에서 조(레코드)의 식별자로 이용하기에 가장 적합한 것을 관계 (테이블)마다 단 한 설계자에 의해 선택, 정의된 후보 키를 말한다. 유일 키는 0~1개 이상의 속성의 집합으로 볼 수 있다
* 관계형 데이터베이스 관리 시스템(RDBMS)과 미들웨어, 애플리케이션 등의 레코드 식별자가 필요한 경우 기본 키가 사용된다. 반드시 기본 키를 사용해야만 하는 경우가 아니면, 다른 후보 키로 대체되어도 기능 수행에는 문제가 없다. 따라서 기본 키의 이론적 의의는 크지 않지만 실무에서 널리 사용되고 있는 개념이다. 그러나 기본 키는 NULL의 존재가 허용되지 않지만, 후보 키에 허용이 되는 차이가 있다. (레코드 추가, 업데이트할 때 제약 조건으로 기본 키를 생각한다면, 고유 제약 조건에 NOT NULL 제약을 가한 것이 기본 키 제약 조건이라고 생각할 수 있다). 관계에 있는 후보 키가 하나인 때에는 그 후보 키가 당연히 기본 키가 된다. 또한 기본 키가 아닌 후보 키는 대리 키(alternate key)라고 한다.
* 테이블에서 하나의 레코드를 지정할 수 있는 하나 이상의 컬럼집합
* 테이블에서 유일한 오직 하나의 값

외래키(Foreign Key) - FK
* 관계형 데이터베이스에서 외래 키(외부 키, Foreign Key)는 한 테이블의 필드(attribute) 중 다른 테이블의 행(row)을 식별할 수 있는 키를 말한다
* 어떤 테이블의 기본키가 다른 테이블의 컬럼에 들어가는 컬럼

테이블(Table)
* 관계형 데이터베이스와 플랫 파일 데이터베이스에서 테이블(table)은 세로줄과 가로줄의 모델을 이용하여 정렬된 데이터 집합(값)의 모임이다.
* 테이블 내의 데이터는 물리적으로 데이터베이스에 저장되지는 않는다. 뷰 또한 관계형 테이블이지만 이들의 데이터는 쿼리 시간에 계산된다. 다른 예로 별명(nickname)이 있는데 이는 다른 데이터베이스의 표를 가리키는 포인터를 나타낸다.
* 정보들의 묶음 단위

컬럼(Column)
* 컬럼(column)이란 관계형 데이터베이스 테이블에서 특정한 단순 자료형의 일련의 데이터값과 테이블에서의 각 열을 말한다. 컬럼은 열이 어떻게 구성되어야 할 지에 대한 구조를 제공한다.
* 관계형 데이터베이스 용어에서 컬럼과 같은 의미로 사용되는 것은 속성(attribute)이다.
* ‘필드’(field)라는 용어가 종종 컬럼의 대용으로 동일한 의미로 사용되지만, 필드와 필드값은 한 열이나 한 컬럼 사이의 교차로 존재하는 단일 항목을 특정할 때 언급하는 것이다.
* 테이블을 구성하는 여러개의 정보들

레코드(Record)
* 로우(row, 행)는 관계형 데이터베이스에서 레코드(record) 또는 튜플(tuple)로 불리기도 하며, 어떤 테이블에서 단일 구조 데이터 항목을 가리킨다. 간단한 용어로, 데이터베이스 테이블은 로우와 컬럼 또는 필드로 구성되어 있다고 간주할 수 있다.
* 각 테이블의 행은 일련의 관련 자료를 나타내며, 테이블에서 모든 로우는 동일한 구조를 가지고 있다.
* 테이블에 들어 있는 여러가지 인스턴스 하나하나를 지정
* 대학교의 학과 테이블
* 기본키(PK)로 구별가능

도메인값(Domain Value)
* 각 컬럼에서 나올 수 있는 후보값


## MySQL & Maria DB

기본 명령어

```SQL
show databases;     // DB들의 리스트를 표시

use world;          // DB들의 리스트 중 'world'를 사용

show tables;        // 사용하는 'world'의 테이블 리스트를 표시

desc city;          // 'city' 테이블의 구조를 표시

select * from city  // 'city' 테이블의 내용을 표시
```

## SQL

>SQL (Structured Query Langague)

* 데이터베이스에 있는 필요한 정보를 사용할 수 있도록 도와주는 언어
* 인터프리터(쿼리문을 입력 받아야 실행)
* 대소문자를 구별하지 않는다(데이터 내용은 구별함)

### DML

> DML(Data Manipulation Langague)

* 테이블의 데이터를 조작하는 기능
* 테이블의 레코드를 CRUD(생성, 삭제, 수정, 조회)
    + INSERT
    + DELETE
    + UPDATE
    + SELECT
### DDL

> DDL(Data Definition Langugae)

* 데이터베이스 테이블의 스키마를 정의, 수정하는 기능
* 데이터베이스 테이블의 생성, 컬럼추가, 타입변경, 각종 제약조건 지정, 수정
    + CREATE
    + DROP
    + ALTER

### DCL

> DCL(Data Control Langague)

* 데이터 베이스나 테이블의 접근 권한이나 CRUD 권한을 정의하는 기능
* 특정 사용자에게 테이블의 조회권한 허가/금지 등
    + GRANT
    + REVOKE


## DISTINCT

SELECT문의 결과값에서 특정 컬럼만 출력할 경우 중복된 값들이 나오는 경우 이를 제거해서 표시하는 기능

> SELECT DISTINCT 컬럼명..... FROM 테이블명

## 논리연산자(AND, OR, NOT, IN, BETWEEN)

SELECT문의 조건절에 논리 조건을 적용해서 원하는 값을 조회할 수 있는 기능

## 결과값 정렬(ORDER BY)

오름차순 or 내림차순으로 결과값을 정렬하여 조회
**여려 개의 경우 컬럼 나열된 순서로 적용(1차정렬, 2차정렬...)**


## 결과값 일부 조회

> 대표적인 비 표준 기능(DBMS 종류마다 다름)
> LIMIT(ROWNUM, TOP)

* SQL쿼리 결과 중 상위 몇 개만 보여주는 쿼리
* 대표적인 비표준기능()

## 집합함수

COUNT()
MIN()
MAX()
SUM()
AVG()

# SQL METHODS

```SQL
LENGTH()                // 레코드의 문자열 컬럼의 글자수를 리턴
MID(a, b)               // a자리부터, b자리까지 문자열을 잘라서 리턴
UPPER()                 // 레코드의 문자열을 모두 대문자로 리턴
LOWER()                 // 레코드의 문자열을 모두 소문자로 리턴
ROUND(컬럼, 자리수)     // 레코드의 소수값을 반올림 해주는 함수
```



## JOIN

* 서로 다른 테이블의 공통 컬럼을 기준으로 합치는(결합하는) 테이블 단위 연산
* 조인의 결과 테이블은 이전 테이블의 컬럼 수의 합과 같다.
* 조인시 서로 다른 테이블에 같은 컬럼명이 존재하면 구분을 위해 테이블명.컬럼명으로 사용해서 표
> 문법
> SELECT * FROM table1 JOIN table2 on table1.column = table2.column
* 조인시 NULL 값을 허용하는 내부조인(불과)과 외부조인(허용)으로 구분
  + INNER JOIN
  + LEFT JOIN
  + RIGHT JOIN
  + FULL JOIN(UNION)


## VIEW

* SQL쿼리의 결과값을 임시테이블로 저장해서 사용할 수 있다.
* 사용용도가 끝나면 명시적으로 삭제해야 한다.(DROP VIEW...)
> 문법
> CREATE VIEW name AS SELECT .....





# MySQL 내장 함수 정리

1. 숫자 관련 함수
▶ ABS(숫자) - 절대값 출력.
▶ CEILING(숫자) - 값보다 큰 정수 중 가장 작은 수.
▶ FLOOR(숫자) - 값보다 작은 정수 중 가장 큰 수[실수를 무조건 버림(음수일 경우는 제외)].
▶ ROUND(숫자,자릿수) - 숫자를 소수점 이하 자릿수에서 반올림.(자릿수는 양수,0,음수를 갖을 수 있다.)
▶ TRUNCATE(숫자,자릿수) - 숫자를 소수점 이하 자릿수에서 버림.
▶ POW(X,Y) or POWER(X,Y) - X의 Y승
▶ MOD (분자, 분모) - 분자를 분모로 나눈 나머지를 구한다.(연산자 %와 같음)
▶ GREATEST(숫자1,숫자2,숫자3...) - 주어진 수 중 제일 큰 수 리턴.
▶ LEAST(숫자1,숫자2,숫자3...) - 주어진 수 중 제일 작은 수 리턴.
▶ INTERVAL(a,b,c,d.....) - a(숫자)의 위치 반환
2. 문자 관련 함수
▶ ASCII(문자) - 문자의 아스키 코드값 리턴.
▶ CONCAT('문자열1','문자열2','문자열3'...) - 문자열들을 이어준다.
▶ INSERT('문자열','시작위치','길이','새로운문자열') - 문자열의 시작위치부터 길이만큼 새로운 문자열로 대치
▶ REPLACE('문자열','기존문자열','바뀔문자열') - 문자열 중 기존문자열을 바뀔 문자열로 바꾼다.
▶ INSTR('문자열','찾는문자열') - 문자열 중 찾는 문자열의 위치값을 출력
▶ LEFT('문자열',개수) - 문자열 중 왼쪽에서 개수만큼을 추출.
▶ RIGHT('문자열',개수) - 문자열 중 오른쪽에서 개수만큼을 추출.
▶ MID('문자열',시작위치,개수) - 문자열 중 시작위치부터 개수만큼 출력
▶ SUBSTRING('문자열',시작위치,개수) - 문자열 중 시작위치부터 개수만큼 출력
▶ LTRIM('문자열') - 문자열 중 왼쪽의 공백을 없앤다.
▶ RTRIM('문자열') - 문자열 중 오른쪽의 공백을 없앤다.
▶ TRIM('문자열') - 양쪽 모두의 공백을 없앤다.
▶ LCASE('문자열') or LOWER('문자열') - 소문자로 바꾼다.
▶ UCASE('문자열') or UPPER('문자열') - 대문자로 바꾼다.
▶ REVERSE('문자열') - 문자열을 반대로 나열한다.
3. 논리 관련 함수
▶ IF(논리식,참일 때 값,거짓일 때 값) - 논리식이 참이면 참일 때 값을 출력하고 논리식이 거짓이면 거짓일 때 출력한다.
▶ IFNULL(값1,값2) - 값1이 NULL 이면 값2로 대치하고 그렇지 않으면 값1을 출력
4. 집계 함수
▶ COUNT(필드명) - NULL 값이 아닌 레코드 수를 구한다.
▶ SUM(필드명) - 필드명의 합계를 구한다.
▶ AVG(필드명) - 각각의 그룹 안에서 필드명의 평균값을 구한다.
▶ MAX(필드명) - 최대값을 구한다.
▶ MIN(필드명) - 최소값을 구한다.
5. 날짜 관련 함수
▶ NOW() or SYSDATE() or CURRENT_TIMESTAMP() - 현재 날짜와 시간 출력
▶ CURDATE() or CURRENT_DATE() -현재 날짜 출력
▶ CURTIME() or CURRENT_TIME() -현재 시간 출력
▶ DATE_ADD(날짜,INTERVAL 기준값) -날짜에서 기준값 만큼 더한다.
※ 기준값 : YEAR, MONTH, DAY, HOUR, MINUTE, SECOND
▶ DATE_SUB(날짜,INTERVAL 기준값) -날짜에서 기준값 만큼 뺸다.
※ 기준값 : YEAR, MONTH, DAY, HOUR, MINUTE, SECOND
▶ YEAR(날짜) -날짜의 연도 출력.
▶ MONTH(날짜) -날짜의 월 출력.
▶ MONTHNAME(날짜) -날짜의 월을 영어로 출력.
▶ DAYNAME(날짜) -날짜의 요일일 영어로 출력.
▶ DAYOFMONTH(날짜) -날짜의 월별 일자 출력.
▶ DAYOFWEEK(날짜) -날짜의 주별 일자 출력(월요일(0),화요일(1)...일요일(6))
▶ WEEKDAY(날짜) -날짜의 주별 일자 출력(월요일(0),화요일(1)...일요일(6))
▶ DAYOFYEAR(날짜) -일년을 기준으로 한 날짜까지의 날 수.
▶ WEEK(날짜) -일년 중 몇 번쨰 주.
▶ FROM_DAYS(날 수) --00년 00월 00일부터 날 수 만큼 경과한 날의 날짜 출력.
▶ TO_DAYS(날짜) --00 년 00 월 00일 부터 날짜까지의 일자 수 출력.
▶ DATE_FORMAT(날짜,'형식') : 날짜를 형식에 맞게 출력
