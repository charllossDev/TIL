## 1. 프로그램상에서의 변화

### 테스트 코드 작성

---

- As-is
    - 기존엔 테스트 코드의 중요성을 깨닫지 못한 상태고, 이미 거대해진 서비스를 테스트 하기엔 막막 했었습니다.
- To-be
    - 로직이 도메인에 집중 됨에 따라 도메인 관련 테스트 코드 작성하기 시작했습니다.
    - Mock등의 러닝 커버가 있는 테스트 코드 보단 junit 기본적인 단위 테스트 및 도메인 테스트 부터 시작했습니다.
    - 비지니스 로직 검증을 할 수가 있었습니다.
    - 테스트 하기 어려운 부분들은 Mock 을 활용하고 있습니다. (외부 api의 응답)
    - 팀원 전체가 도메인 로직, 비지니스 로직 검증을 위한 최소한의 테스트 코드를  작성하기 시작했습니다.

### 도메인에서 처리 가능한 로직은 도메인으로

---

- As-is
    - 기존 도메인은 데이터베이스와 동기화를 위한 상태 값만 가지고 있었습니다.
    - Lombok의 getter/setter 적극 활용으로 불완전 객체가 생성되고 있었습니다.
    - 불완전 객체이다 보니 어디서든 데이터의 호출, 삽입이 가능합니다.
    - 접근 제어자를 신경 쓰지 않고 대부분이  public 으로 되어 있었습니다.
- To-be
    - 도메인에서 처리가능한 로직은 도메인으로 이동함에 따라 책임(행위)과 상태 값을 가지면서 객체 다운 객체를 만들었습니다.
    - 무작정 Lombok을 쓰기보다는 필요한 경우만 getter만들어 호출, setter는 사용하지 않도록 해서 객체의 적절한 책임 전달을 위해 노력하고 있습니다. (명확함 메서드 이름으로 도메인에서 처리)
    - 완전 불변 객체는 아니지만 어느정도 트레이드 오프 영역을 갖고 객체의 불변을 지키려고 노력중 입니다. (가장 논쟁을 많이 하고 있습니다)
    - 로직이 도메인으로 이동함에 따라 도메인 내에서 처리하는 메서드 등, 외부에서 불 필요한 메서드는 적절한 접근 제어자를 처리하고 있습니다.

### 자연스럽게 다이어트한 서비스

---

- As-is
    - 불완전 객체에서 get/set 을 이용해 서비스에 모든 로직을 구현하고 있었습니다.
- To-be
    - 도메인에 로직이 응집되어 있으니 도메인 내에서 로직을 수행 후 적절한 상태를 반환해 줄 수 있습니다.
    - 데이터베이스에서 조회한 결과가 컬렉션 일 땐 일급 컬렉션을 적극 활용하고 있습니다.

### 일급컬렉션을 통해 도메인 로직의 응집도 증가

---

- As-is
    - 일급 컬렉션의 이해도가 매우 낮은 상태며, 활용조차 하지 못 했었습니다.
- To-be
    - 서비스에서 처리하던 부분들을 일급 컬렉션을 통해 객체의 책임(행위)에 대한 응집도를 높일 수 있었습니다.
    - 생성자의 중요성을 깨달을 수 있었습니다. (유연성)
    - 단일 책임 원칙을 지키려고 노력하면서 사용하다 보니 자연스럽게 습관화가 되었습니다.

### 개발팀 컨벤션이 자연스럽게 구글 자바 스타일 가이드를 따라감

---

- As-is
    - 개발자 개개인의 특색이 너무 강했고, 서비스를 만들고 고치는데 집중을 하다 보니 컨벤션의 중요성을 모르고 있었습니다.
- To-be
    - 일관성으로 누가 봐도 어느정도 이해할 수 있는 코드들이 만들어지기 시작했습니다.
    - 예전엔 코드를 이해하려고 하면 도움이 필요했고, 휴가인 경우는 작업을 제대로 할 수가 없었지만 지금은 스타일을 맞춤에 따라 어느정도 코드를 유추해서 유지보수를 할 수 있습니다.

### 버전관리 메시지

---

- As-is
    - 커밋 메시지에 대한 중요성을 깨닫지 못한 상태고, 메시지 또한 무분별하게 생각대로 적는 경우가 많았습니다.
- Bo-be
    - AngularJS commit message 컨벤션을 가져다 쓸 수 있도록 모든 팀원이 맞춰 나가고 있습니다.
    - 어떤 작업을 했는지 커밋 로그를 보면 한번에 알 수 가 있습니다.

### 명확한 메서드명

---

- As-is
    - 어떤 책임을 가지고 있는 메서드 인지 보려면 코드를 읽어야만 알 수 있었습니다.
- To-be
    - 메서드 명을 통해서 어떤 책임이며 어떤 상태를 가진 객체 인지 유추할 수 있습니다. 이에 따라 코드를 이해하는 속도가 상승했습니다.

### 기본적인 문자열, 숫자 상수로 치환

---

- As-is
    - 필요성을 느끼지 못 했기 때문에 없었습니다.
- To-be
    - 체감이 가장 컸던 건 해당 문자열, 숫자가 어떤 의미를 갖는지 한번에 알 수 있었습니다.

## 2. 개발팀의 설계 변화

---

- ERD를 먼저 그리는 것 보단 적절한 책임을 역할을 부여할 수 있도록 기능 단위의 생각을 많이 하게 되었습니다.
- 각 역할의 협력(관계)를 생각하면서 설계를 진행해 나갈 수 있게 되었고 데이터 기반의 개발에서 객체 지향적 개발을 하게 되면서 기능 추가 및 유지 보수에 많은 이점을 가질 수 있게 되었습니다. (엄청난 발전이라고 생각합니다.)
- 비지니스 로직을 서비스에 바로 구현하는 습관에서 도메인에서 처리 가능한 로직은 비지니스 로직으로 이동함에 따라 객체에 맞는 역할에 대해 응집력을 높일 수 있었습니다.
- 도메인에 로직을 만들다 보니 도메인의 컬렉션을 처리할 때 일급 컬렉션을 많이 활용하게 되었습니다.
- 난무하던 if-else, try-catch 코드가 많이 줄어들게 되었습니다.
- 코드를 보게 될 때 컨벤션 및 변수명, 메서드 명이 어느정도 일관 됨에 따라 다른 사람의 코드를 이해하기 수월했습니다.
- 테스트를 바탕으로 한 객체 지향적인 설계는 개발의 즐거움을 되찾아 주었습니다.
- 성공하는 테스트들이 자신감을 가져다 주었고 이로인해 배포 날마다 긴장하며 버티던 하루하루를 가장 기다려지는 날로 변화시켜 주었습니다.

## 3. 첫 시작은 그리고 짧은 후기

---

팀원 중 한 명이 TDD 수업을 선행 하면서 회사 내의 전파하기 시작했습니다.

팀원 한 명의 학습으로 배웠던 모든 내용을 다 적용하는 것이 아니라 정말 필요하다고 생각하는 부분에 대해서 어필을 하였고 그로 인해 팀원의 대다수가 다음 수업 때 수업을 듣게 되었습니다.

팀의 대부분이 수업을 듣게 되면서 리팩토링 작업의 시간을 많이 단축할 수 있었습니다.

무엇보다 가장 크게 체감이 되었던 부분은 개발 설계 회의할 때 서로 이해할 수 있는 용어, 객체의 설계 방향을 알기가 쉬웠고 이런 과정에서 성장해 나감을 느낄 수 있는 것이 좋았습니다.

현재는 객체의 응집도, 테스트 코드, 객체의 이름(클래스명), 메서드 명이 어느정도 규칙성을 갖게 되면서 유지 보수성에 대해 많은 생각을 할 수 있었습니다.

기존과는 다른 효율(업무 처리 속도 향상)을 가져다 주는 느낌이 들었습니다.

관련 로직을 봐야할 때 서비스가 아닌 도메인을 보면 이해할 수 있었고 사이드 이펙트를 어느정도 예상할 수 있어서 업무 효율이 많이 올라갔습니다.

현재 백엔드 팀은 NextStep의 TDD 수업을 듣고 많은 성장을 할 수 있었고 개개인의 성장이 팀을 성장 시킬 수 있었던 것 같습니다.

이러한 리팩토링, 테스트 코드 작성 등의 협업 부분에서는 서로 협력이 되지 않으면 할 수가 없었던 부분들 이지만, NextStep 수업을 들으면서 다들 많은 동기 부여가 되어서 빠르게 진행을 할 수가 있었습니다.

시작은 2019년 11월 중순 부터 시작이 되었고 현재 2020년 5월 중순쯤 되서 이러한 개발 문화가 정착될 수 있었습니다.

NextStep을 통해서 현재 회사의 문화가 잡힐 수 있었고 문화가 잡히는 과정들을 조금 적어 보았습니다.

감사합니다.
